This document is used to support the understanding of `execve()` source code.

# Prerequisite

- Linux source code version: **3.18**

    > Online linux source code reference[2]

## Source Code
``` C
// include/linux/binfmts.h

#define BINPRM_BUF_SIZE 128

// ...

struct linux_binprm {
    char buf[BINPRM_BUF_SIZE]; // filled with first chunk of data from the program file[1]
    // ...
    struct file * file; // freshly opened file for the program being invoked
    // ...
}
```


## Understand get_arg_page()

``` C
static struct page *get_arg_page(struct linux_binprm *bprm, unsigned long pos, int write) {

    // ...
    ret = get_user_pages(current, bprm->mm, 
                        pos, 1, 
                        write, 1, &page, 
                        NULL);
    // ...
}
```

``` C
// https://elixir.bootlin.com/linux/v3.18/source/mm/nommu.c#L199

long get_user_pages(struct task_struct *tsk, struct mm_struct *mm,
                    unsigned long start, unsigned long nr_pages,
                    int write, int force, struct page **pages,
                    struct vm_area_struct **vmas) {
}
```

# Reference

1. [How programs get run](https://lwn.net/Articles/630727/)

2. [Linux source code v3.18](https://elixir.bootlin.com/linux/v3.18/source/fs/exec.c)

3. [Understanding the Linux Kernel / ](https://doc.lagout.org/operating%20system%20/linux/Understanding%20Linux%20Kernel.pdf)

